#!/usr/bin/env bash

npm_repo_install () {
	echo "ðŸ“š ---> Installing repo dependencies"
	npm install --only=dev --loglevel=error
}

build_bookshop () {
	echo "ðŸ“š ---> Installing bookshop dependencies"
	npm install --loglevel=error
	echo "ðŸ“š ---> Installing bookshop dev dependencies"
	npm install --only=dev --loglevel=error
	echo "ðŸ“š ---> Building bookshop"
	npm run build
	echo "ðŸ“š ---> Complete"
}

build_site_bookshop () {
	npm_repo_install
	echo "ðŸ“š ---> Entering Site directory"
	cd demo-site
	build_bookshop
}

if [ "$BUILD_SITE" = 'true' ]; then
	echo "ðŸ“š ---> Running bookshop prebuild for Site"
 	build_site_bookshop
else
 	echo "ðŸ“š ---> No prebuild variable found, skipping"
fi
